# Konveyor Assets Generation: Cloud Foundry to Kubernetes migration for a Java backend application

## Prerequisites Details

- Kubernetes 1.25+
- [Konveyor Discovery Manifest](https://github.com/konveyor/enhancements/tree/master/enhancements/assets-generation/cloud-foundry-application-discovery#proposal-specification) generated by the [Konveyor Kantra CLI](https://github.com/konveyor/kantra).
- The Helm CLI can be used via the `helm template` command, but the [Konveyor Kantra CLI](https://github.com/konveyor/kantra) is recommended.

## Chart Details

This chart uses the configuration stored in the [Konveyor Discovery Manifest](https://github.com/konveyor/enhancements/tree/master/enhancements/assets-generation/cloud-foundry-application-discovery#proposal-specification) to generate Kubernetes deployment manifests for a Java backend application, including `Deployment`, `Service` and `ServiceAccount` objects.

## Configuration

Aside from the fields included in the [Konveyor Discovery Manifest](https://github.com/konveyor/enhancements/tree/master/enhancements/assets-generation/cloud-foundry-application-discovery#proposal-specification) generated by the [Konveyor Kantra CLI](https://github.com/konveyor/kantra), the following table includes additional configurable parameters of the `java-backend` chart and their default values:

| Parameter | Description | Default Value |
| :--- | :--- | :--- |
| `replicaCount` | The number of application replicas to deploy | `1` |
| `image.registry` | The container registry to pull the image from | `image-registry.openshift-image-registry.svc:5000` |
| `image.pullPolicy` | The image pull policy for the containers | `Always` |
| `image.tag` | The image tag to use for the container image | `latest` |
| `port` | The port the application is listening on | `8080` |
| `portName` | The name of the application's port | `8080-tcp` |
| `deploymentStrategy.type` | Specifies the method to replace old Pods with new ones | `RollingUpdate` |
| `deploymentStrategy.rollingMaxSurge` | The maximum number of pods that can be created above the desired replica count during a rolling update. Only used if `deploymentStrategy.type` is `RollingUpdate` | `25%` |
| `deploymentStrategy.rollingMaxUnavailable` | The maximum number of pods that can be unavailable during a rolling update. Only used if `deploymentStrategy.type` is `RollingUpdate` | `20%` |
| `serviceAccount.create` | Specifies whether a Kubernetes service account should be created | `true` |
| `serviceAccount.annotations` | Annotations to add to the service account | `{}` |
| `serviceAccount.name` | The name of the service account to use. If not set and `create` is `true`, a name is generated using the application name from the Konveyor Discovery Manifest | `""` |

These additional values aim at allowing users to provide additional configuration for concepts that don't have a direct mapping between Cloud Foundry and Kubernetes.

## Code of Conduct

Refer to Konveyor's Code of Conduct [here](https://github.com/konveyor/community/blob/main/CODE_OF_CONDUCT.md).
